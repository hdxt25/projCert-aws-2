---
- name: Install and configure Puppet agent
  hosts: localhost
  become: yes
  connection: local

  tasks:
    - name: Update apt cache
      apt:
        update_cache: yes

    - name: Install Puppet agent
      apt:
        name: puppet
        state: present

    - name: Ensure Puppet service is started
      service:
        name: puppet
        state: started
        enabled: yes
